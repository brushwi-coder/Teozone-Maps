<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TEOZONE • OSM Vector (No Labels)</title>

  <!-- MapLibre GL -->
  <link rel="stylesheet" href="https://unpkg.com/maplibre-gl@3.6.1/dist/maplibre-gl.css">
  <style>
    html, body { height:100%; margin:0; }
    #map { width:100vw; height:100vh; }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://unpkg.com/maplibre-gl@3.6.1/dist/maplibre-gl.js"></script>
  <script>
    const MAPTILER_KEY = 'YOUR_MAPTILER_KEY'; // ← 네 키로 교체

    // style.json 불러와서: ① 키 주입 ② 라벨 레이어 제거 ③ 맵 로드
    fetch('./style.json').then(r => r.json()).then(style => {
      // ① {key} 자리에는 실제 키를 주입
      if (style.sources?.openmaptiles?.url) {
        style.sources.openmaptiles.url =
          style.sources.openmaptiles.url.replace('WacMh78SKwta6Z7sPbId', MAPTILER_KEY);
      }
      if (typeof style.glyphs === 'string') {
        style.glyphs = style.glyphs.replace('{key}', MAPTILER_KEY);
      }

      // ② 라벨 없애기: symbol 타입/라벨성 레이어 전부 제거
      style.layers = style.layers.filter(l => {
        if (l.type === 'symbol') return false; // 모든 텍스트/아이콘
        const id = (l.id || '').toLowerCase();
        // 혹시 symbol 아닌데 이름이 라벨 성격이면 제거
        return !/(label|name|housenumber|transportation_name)/.test(id);
      });

      // ③ 맵 생성 (UI 최소화)
      const map = new maplibregl.Map({
        container: 'map',
        style,
        center: [126.9780, 37.5665], // 서울시청
        zoom: 14,
        attributionControl: true
      });

      // 기본 내비게이션 버튼도 빼고 싶으면 아래 주석 해제 X (지금은 미추가)
      // map.addControl(new maplibregl.NavigationControl(), 'top-right');
    });
  </script>
</body>
</html>
